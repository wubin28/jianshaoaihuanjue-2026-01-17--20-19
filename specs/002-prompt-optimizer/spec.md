# Feature Specification: 减少AI幻觉 - 提示词优化工具

**Feature Branch**: `002-prompt-optimizer`
**Created**: 2026-01-18
**Status**: Draft
**Input**: User description: "减少AI幻觉提示词优化工具 - 用户输入原始提示词，系统自动添加减幻提示词，支持一键复制"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 生成优化提示词 (Priority: P1)

用户希望通过工具快速将原始提示词转化为包含减幻指令的优化提示词。用户在输入框中输入原始问题或提示词，点击"查询常识"按钮后，系统自动在提示词前后添加预设的减幻文本，生成完整的优化提示词显示在输出区域。

**Why this priority**: 这是产品的核心功能，没有此功能产品无法提供任何价值。用户使用此工具的主要目的就是生成优化后的提示词。

**Independent Test**: 可以通过输入任意文本并点击按钮来独立测试，验证输出区域是否正确显示包含前缀"你是专家。"和后缀"请提供主要观点的3个不同出处的网页链接以便我查验。如果你不知道或查不到，就实说，不要编造。"的完整提示词。

**Acceptance Scenarios**:

1. **Given** 用户在输入框中输入了原始提示词"什么是量子计算", **When** 用户点击"查询常识"按钮, **Then** 输出区域显示完整的优化提示词，格式为：
   ```
   你是专家。

   什么是量子计算

   请提供主要观点的3个不同出处的网页链接以便我查验。如果你不知道或查不到，就实说，不要编造。
   ```

2. **Given** 用户已生成优化提示词, **When** 用户再次输入新的提示词并点击按钮, **Then** 输出区域的内容被新生成的优化提示词完全替换（替换模式，不追加）

3. **Given** 用户点击"查询常识"按钮生成优化提示词, **When** 生成完成, **Then** 输入框自动清空，便于用户继续输入新内容

---

### User Story 2 - 一键复制优化提示词 (Priority: P2)

用户希望能够方便地将生成的优化提示词复制到剪贴板，以便粘贴到AI对话工具中使用。

**Why this priority**: 复制功能是将优化提示词实际应用到其他工具的关键步骤，但依赖于P1功能先生成内容。

**Independent Test**: 在输出区域有内容的情况下，点击复制按钮，验证内容是否成功复制到系统剪贴板。

**Acceptance Scenarios**:

1. **Given** 输出区域显示有优化提示词, **When** 用户点击复制按钮, **Then** 优化提示词被复制到系统剪贴板，且用户收到复制成功的视觉反馈

2. **Given** 输出区域为空（尚未生成任何内容）, **When** 用户查看复制按钮, **Then** 复制按钮处于禁用状态或不可见

---

### User Story 3 - 响应式界面体验 (Priority: P3)

用户希望能在电脑和手机上都能舒适地使用此工具，界面能自适应不同屏幕尺寸。

**Why this priority**: 虽然核心功能在任何屏幕上都能工作，但良好的响应式体验能提升用户满意度和使用频率。

**Independent Test**: 在不同设备和屏幕尺寸下访问页面，验证布局是否合理可用。

**Acceptance Scenarios**:

1. **Given** 用户在桌面浏览器（宽度 > 768px）访问工具, **When** 页面加载完成, **Then** 显示完整的横向布局，输入框和按钮并排显示

2. **Given** 用户在手机浏览器（宽度 <= 768px）访问工具, **When** 页面加载完成, **Then** 显示适合触屏的垂直布局，输入框和按钮自动调整为堆叠排列

---

### Edge Cases

- 输入框为空时点击"查询常识"按钮：系统应忽略空输入或显示提示信息，不生成空内容
- 用户输入超长文本（如数千字符）：输出区域应支持滚动查看，不截断内容
- 用户输入包含特殊字符或换行符的文本：系统应原样保留，不进行转义或格式化
- 剪贴板API不可用（某些浏览器或权限限制）：显示友好的错误提示或提供备用复制方式（如选中文本）

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系统必须在页面顶部显示主标题"减少AI幻觉"
- **FR-002**: 系统必须提供多行文本输入框供用户输入原始提示词
- **FR-003**: 系统必须提供"查询常识"按钮，位于输入框右侧
- **FR-004**: 点击"查询常识"按钮后，系统必须将原始提示词包装为优化提示词，格式为：
  - 前缀："你是专家。\n\n"
  - 中间：用户原始输入
  - 后缀："\n\n请提供主要观点的3个不同出处的网页链接以便我查验。如果你不知道或查不到，就实说，不要编造。"
- **FR-005**: 系统必须在输出区域显示生成的优化提示词，该区域位于输入区域上方
- **FR-006**: 输出区域必须支持滚动查看长内容
- **FR-007**: 输出区域必须采用替换模式，每次只显示最新生成的内容
- **FR-008**: 系统必须在输出区域提供复制按钮，支持一键复制内容到剪贴板
- **FR-009**: 成功生成优化提示词后，输入框必须自动清空
- **FR-010**: 界面必须采用橙色主题视觉风格
- **FR-011**: 界面必须响应式适配桌面和移动设备屏幕

### Key Entities

- **原始提示词**: 用户输入的原始问题或指令文本，作为优化的基础内容
- **优化提示词**: 系统生成的完整提示词，包含减幻前缀、用户原始输入和减幻后缀
- **减幻模板**: 预设的前缀和后缀文本，用于包装用户输入以减少AI幻觉

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户从输入提示词到获得优化结果的操作时间不超过3秒（点击按钮后立即显示）
- **SC-002**: 用户能在2次点击内完成"输入-生成-复制"的完整流程
- **SC-003**: 界面在320px至1920px宽度范围内均能正常显示和操作
- **SC-004**: 复制功能成功率达到95%以上（在支持剪贴板API的现代浏览器中）
- **SC-005**: 首次使用用户无需说明即可理解如何使用工具（界面直观性）

## Assumptions

- 用户使用现代浏览器访问（支持剪贴板API）
- 减幻提示词模板为固定文本，不需要用户自定义
- 工具为纯前端应用，不需要后端服务器处理
- 橙色主题指使用橙色作为主色调，具体色值由设计实现时确定
