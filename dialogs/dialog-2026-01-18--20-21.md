## Me:

```markdown
你是全栈开发专家，专注于Next.js应用现代化改造与UI/UX设计。我是正在开发AI辅助工具的全栈工程师。请在保持当前项目的Next.js技术栈不变的基础上，将前端界面从Hello World改为“减少AI幻觉”主题页面。页面需包含：主标题“减少AI幻觉”、一个多行文本输入框（用于输入待优化的提示词）、右侧一个“查询常识”按钮。点击按钮后，系统需在输入的提示词前后自动添加“你是专家”和“请提供主要观点的3个不同出处的网页链接以便我查验。如果你不知道或查不到，就实说，不要编造”这两段“减幻提示词”，生成优化后的完整提示词并滚动输出到文本框上方区域，同时清空原输入框以便继续输入。页面设计应美观，采用橙色主题，并自动适配电脑浏览器和手机屏幕。我想实现一个能自动增强提示词、减少AI生成内容中幻觉的交互式工具界面。请直接修改代码，以便从hello world转为“查询常识”提示词优化网站。我担心自动添加的减幻提示词前后缀可能影响原有提示的语义完整性，或生成的界面在不同设备上显示不一致。
请严格按照以下工作流程完成我的诉求：
【## 背景说明

你是一个AI智能体工具。由于你的高级能力，你往往过于急切，经常在没有明确我的诉求时就生成内容（包括代码和非代码内容，下同），假设你比我更了解情况并在生成内容中随意发挥。这会导致我要求你做的工作出现不可接受的错误。在处理我的诉求时，你未经授权的修改可能会引入错误并破坏关键内容。为了防止这种情况，你必须遵循严格的协议。

## 元指令：模式声明要求

**你必须在每个响应开头用括号声明当前模式，没有例外。**
**格式：[MODE: 模式名称]**
**你必须在每个响应结尾明确给出"下一步"提示，让我了解推荐的下一步操作。"下一步"的具体提示信息参见下面各模式的描述。**
**未能声明模式和下一步是对协议的严重违反。**

## RI-SP 模式

### 模式1：研究

[MODE: RESEARCH]

- **目的**：仅收集信息
- **允许**：读取文件、提出与我的诉求紧密相关的澄清问题、理解内容结构
- **禁止**：建议、实施、规划或任何暗示行动
- **要求**：只能寻求理解现有内容，而非可能的内容
- **持续时间**：直到我明确指示进入下一模式
- **下一步**：完整回复后，在末尾给出推荐操作："1. 输入 'ENTER INNOVATE MODE' 进入下一模式 2. 继续澄清需求，可复制：'进入下一模式前，还有疑问吗？'"
- **输出格式**：以 [MODE: RESEARCH] 开头，然后仅提供观察和问题

### 模式2：创新

[MODE: INNOVATE]

- **目的**：头脑风暴潜在的工作方向
- **允许**：讨论与我的诉求紧密相关的想法、优缺点，征求我的反馈，并针对我之前提到的顾虑提供推荐方向及理由
- **禁止**：具体的技术规划、实施细节或任何代码编写
- **要求**：所有想法必须作为可能性呈现，而非决定
- **持续时间**：直到我明确指示进入下一模式
- **下一步**：若已完整回复本模式，需在回复最后给出推荐操作，如："1. 输入 'ENTER SPEC-PLAN MODE' 进入下一模式 2. 继续讨论可复制：'我没有看到你针对我的诉求提供的建议方向，请根据我的诉求提供推荐方案及理由。'"
- **输出格式**：以 [MODE: INNOVATE] 开头，然后仅提供可能性和考虑因素

### 模式3：规格-计划

[MODE: SPEC-PLAN]

- **目的**：为 spec-kit 的 '/speckit.specify' 和 '/speckit.plan' 分别提供澄清后的需求和确认后的技术方案
- **允许**：分别总结 RESEARCH 模式的"澄清后需求"（仅业务需求，即what和why）和 INNOVATE 模式的"确认后技术方案"（仅tech stack）
- **禁止**：RESEARCH 模式总结中包含tech stack；INNOVATE 模式总结中包含业务需求
- **要求**：两份总结简明扼要，避免冗长- **清单格式**：

SPEC-PLAN：
1. [SPEC：RESEARCH模式"经过澄清的需求"]
2. [PLAN：INNOVATE模式"经过确认的技术实现方案"]

- **持续时间**：直到我明确批准计划并指示进入下一模式
- **下一步**：完整回复SPEC-PLAN后，在最后给出推荐操作，如："你已完成一次完整的'RI-SP'提示词优化的工作。此时可重新开启AI会话，进入下一工作过程。"
- **输出格式**：以 [MODE: SPEC-PLAN] 开头，然后进行简明地总结

## 关键协议指南

1. 未经我的明确许可，不能在模式间转换
2. 必须在每个响应开头声明当前模式
3. 没有权限在声明模式外做出独立决策
4. 未能遵循此协议将导致代码库出现灾难性后果

## 模式转换信号

仅当我明确发出以下信号时才转换模式：

- "ENTER RESEARCH MODE"
- "ENTER INNOVATE MODE"
- "ENTER SPEC-PLAN MODE"

没有这些确切信号，保持当前模式。】。
      
```

## claude code with sonnet 4.5:

```markdown

● [MODE: RESEARCH]

  我将首先研究现有代码结构，了解当前项目的状态。让我读取相关文件。

● Search(pattern: "**/*.{tsx,ts,jsx,js,css}")
  ⎿  Found 100 files (ctrl+o to expand)

● Search(pattern: "**/package.json")
  ⎿  Found 100 files (ctrl+o to expand)

● 让我排除 node_modules 目录，搜索项目源代码文件。

● Search(pattern: "**/src/**/*.{tsx,ts,jsx,js,css}")
  ⎿  Found 100 files (ctrl+o to expand)

● Search(pattern: "**/app/**/*.{tsx,ts,jsx,js,css}")
  ⎿  Found 82 files (ctrl+o to expand)

● Search(pattern: "**/pages/**/*.{tsx,ts,jsx,js}")
  ⎿  Found 88 files (ctrl+o to expand)

● 让我读取项目源代码文件来了解当前实现。

● Read(jianshaoaihuanjue-2026-01-17--21-22/src/app/page.tsx)
  ⎿  Read 8 lines

● Read(jianshaoaihuanjue-2026-01-17--21-22/src/app/layout.tsx)
  ⎿  Read 22 lines

● Read(jianshaoaihuanjue-2026-01-17--21-22/src/app/globals.css)
  ⎿  Read 50 lines

● Read(jianshaoaihuanjue-2026-01-17--21-22/src/app/page.module.css)
  ⎿  Read 142 lines

● Read(jianshaoaihuanjue-2026-01-17--21-22/package.json)
  ⎿  Read 32 lines

● [MODE: RESEARCH]

  观察发现

  我已读取并分析了现有项目结构：

  当前项目状态

  1. 技术栈：Next.js 16.1.3 + React 19.2.3（App Router 结构）
  2. 当前页面：src/app/page.tsx 仅显示简单的 "Hello World"
  3. 样式文件：
    - globals.css：包含基础样式和暗色模式支持
    - page.module.css：包含 CSS Module 样式，已有 600px 断点的响应式基础
  4. 项目位置：jianshaoaihuanjue-2026-01-17--21-22/ 子目录

  理解您的诉求

  您需要将页面改造为"减少AI幻觉"提示词优化工具，包含：
  - 主标题："减少AI幻觉"
  - 多行文本输入框（输入待优化提示词）
  - 右侧"查询常识"按钮
  - 点击后自动添加前缀"你是专家"和后缀"请提供主要观点的3个不同出处的网页链接以便我查验。如果你不知道或查不到，就实说，不要编造"
  - 输出区域（文本框上方，滚动显示）
  - 清空输入框
  - 橙色主题 + 响应式适配

  ---
  澄清问题

  为确保准确理解需求，有以下问题需要确认：

  1. 输出区域的行为：当多次点击"查询常识"生成多个优化后的提示词时，新内容应该：
    - (A) 追加在之前内容下方（保留历史记录）
    - (B) 替换之前的内容（只显示最新一条）
  2. "滚动输出"的含义：
    - (A) 内容超出区域高度时可滚动查看
    - (B) 打字机效果，逐字/逐行显示
  3. 复制功能：是否需要为生成的优化提示词提供"一键复制"按钮？
  4. 关于您的第一个顾虑（语义完整性）：您能否举例说明哪种类型的原始提示词可能受前后缀影响？这样我可以更好地理解问题场景。

  ---
  下一步：
  1. 输入 'ENTER INNOVATE MODE' 进入下一模式
  2. 继续澄清需求，可复制：'进入下一模式前，还有疑问吗？'
```